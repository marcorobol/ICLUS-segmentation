<!doctype html>

<html lang="en">

<head>

    <script src="./vendors/jquery/3.4.1/jquery-3.4.1.min.js"></script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script> -->
    <script src="https://unpkg.com/vue@2.6.12/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <meta charset="utf-8">

    <script src="./my-footer.js"></script>


    <script src="./video-list/video-list.js"></script>
    

    <script src="./sankey/sankey.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link href="Chart.min.css" rel="stylesheet" />


    <script src="./segment/segment.js"></script>
    
    <script src="./vendors/video.js/video.min.js"></script>
    <script src="./vendors/videojs-offset.js"></script>
    <link href="./vendors/video.js/video-js.min.css" rel="stylesheet" />
    <link href="https://unpkg.com/@videojs/themes@1/dist/fantasy/index.css" rel="stylesheet" />
    <style>
        .vjs-control-bar {
            position: absolute !important;
            top: -60px !important;
        }
        .vjs-big-play-button {
            position: absolute !important;
            top: -30px !important;
        }
        .vjs-volume-panel, .vjs-picture-in-picture-control, .vjs-fullscreen-control {
            visibility: hidden;
        }
        .vjs-control-bar {
            opacity: 1 !important;
        }
    </style>
    <link href="./segment/css/custom_new.min.css" rel="stylesheet">
    <script src="./segment/js/fetch.js"></script>
    <script src="./segment/js/metadata-form.js"></script>
    <script src="./segment/js/segments-table.js"></script>
    <script src="./segment/js/cropping-tool.js"></script>
    <script src="./segment/js/segmentation-tool.js"></script>
    <script src="./segment/js/video-player.js"></script>

    <script src="./query-binder.js"></script>
    <script src="./editable-select.js"></script>

</head>



<body>
    <div id="vue-root-app">
        <v-app>
        
            <v-app-bar app>
                <router-link to="/">Home</router-link>

                <v-spacer></v-spacer>
                <router-link to="/video-list">Segmentations overview</router-link>

                <v-spacer></v-spacer>
                <a href="./segment">Segment a random video</a>
                <!-- <router-link to="/segment">Segment a random video</router-link> -->

                <v-spacer></v-spacer>
                <router-link to="/sankey">Sankey</router-link>

                <v-spacer></v-spacer>
                <a href="/overview">Overview(Deprecated)</a>

                <v-spacer></v-spacer>
                <a href="/stats">Chart(Deprecated)</a>

                <v-spacer></v-spacer>
                <a href="/stats/sankey.html">Sankey(Deprecated)</a>

            </v-app-bar>

            <v-main>

                <router-view></router-view>

            </v-main>

            <my-footer></my-footer>

        </v-app>
    </div>

    <script type="text/javascript">
        
        const router = new VueRouter({
            mode: 'hash',//'history',
            base: '/webapp',
            routes: [
                { path: '/', component: { template: '<div>Hello!</div>' } },
                { path: '/segment', component: globalThis.segment },
                { path: '/video-list', component: globalThis.videoList },
                { path: '/sankey', component: globalThis.sankey },
            ]
        })

        new Vue({
            el: '#vue-root-app',
            vuetify: new Vuetify(),
            router: router,
            data: {
                e1: 1,
                segmentations_stats: {"null":0, 0:0, 1:0, 2:0, 3:0}
            },
            async mounted () {

                let vue_this = this;
                
                query_res = await fetch(`../api/segmentations/stats`)
                    .then((resp) => resp.json()) // Transform the data into json
                    .catch( error => console.error(error) ); // If there is any error you will catch them here
                for (r of query_res) {
                    this.segmentations_stats[r.rate] = r.count
                }
                
            }
        })
    
    </script>

</body>
</html>